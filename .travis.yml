language: node_js
node_js:
    - "0.10"

addons:
  sauce_connect:
    username: "zoetrope"
    access_key:
        secure: "gt0mcN9r93rE8h5lv0a7CA4dZlF1Ctqy3CSX/9wiWqSk2jVwBgQbewSRd2MvLcuB7iUb/O3VFbQWJa/8+FO24VaY1ljYiOwJ6nZ51xjjt4ndKAJFCVVzchK4tYo7PZmYxbssOyY/HlZKSjm/LhDth0v8dg1gzyYwyP+F8flP9MQ="

install:
    - npm install
    - sudo apt-get update -qq
    - sudo apt-get install -y graphicsmagick
    - git clone https://github.com/ZoetropeImaging/zoetrope-jquery

before_script:
    - cd zoetrope-jquery
    - npm install
    - gulp
    - cd ..
    - "export DISPLAY=:99.0" 
    - "sh -e /etc/init.d/xvfb start"
    - http-server -p 8888 zoetrope-jquery/dist & # start a Web server
    - sleep 3 # give Web server some time to bind to sockets, etc

script:
    - cd tests
    - protractor testSuite.conf.js
